(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{415:function(t,a,e){t.exports=e.p+"assets/img/hashRedirect.18131b6f.png"},416:function(t,a,e){t.exports=e.p+"assets/img/redirecturl.604eaf90.png"},495:function(t,a,e){"use strict";e.r(a);var s=e(0),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一-短链如何生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一-短链如何生成"}},[t._v("#")]),t._v(" 一.短链如何生成")]),t._v(" "),s("blockquote",[s("p",[t._v("前提：6 位 62 进制数可表示 568 亿的数，应付长链转换绰绰有余。")])]),t._v(" "),s("h3",{attrs:{id:"长网址hash方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#长网址hash方式"}},[t._v("#")]),t._v(" 长网址Hash方式")]),t._v(" "),s("ol",[s("li",[t._v("长网址hash得到一个十进制hash值A。")]),t._v(" "),s("li",[t._v("查询hash值A是否存在数据库，存在则长网址后拼接随机数再进行hash。")]),t._v(" "),s("li",[t._v("将十进制hash值A转化为62进制值B。")]),t._v(" "),s("li",[t._v("拼接62进制值B拼到路径后面得到短链 https://域名/B值。")]),t._v(" "),s("li",[t._v("将长网址、短链长、长网址10进制hash值 存入数据库。")])]),t._v(" "),s("p",[s("img",{attrs:{src:e(415),alt:"长网址Hash方式"}})]),t._v(" "),s("h3",{attrs:{id:"分布式id方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分布式id方式"}},[t._v("#")]),t._v(" 分布式ID方式")]),t._v(" "),s("ol",[s("li",[t._v("生成分布式ID与长网址一一对应。")]),t._v(" "),s("li",[t._v("将分布式ID转化为62进制值B。")]),t._v(" "),s("li",[t._v("拼接62进制值B拼到路径后面得到短链 https://域名/B值。")]),t._v(" "),s("li",[t._v("将长网址、短链、分布式ID存入数据库。")])]),t._v(" "),s("p",[t._v("二者相比，长网址hash会冲突需要解决，分布式ID方式没有冲突。推荐分布式ID方式。")]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"二-短链如何查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-短链如何查询"}},[t._v("#")]),t._v(" 二.短链如何查询")]),t._v(" "),s("blockquote",[s("p",[t._v("短网址是非10进制的数字,对计算机来说就是一串字符,直接存到数据库不好做范围查询.")])]),t._v(" "),s("ol",[s("li",[t._v("针对分布式ID方式，分布式ID就是短链值的十进制。在查询的时候短网址中的B值62进制转换成10进制，根据分布式ID查询。")]),t._v(" "),s("li",[t._v("针对长网址hash方式，长网址10进制hash值是数字。在查询的时候短网址B值62进制转换成10进制，根据长网址10进制值查询。")])]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"三-浏览器如何访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-浏览器如何访问"}},[t._v("#")]),t._v(" 三.浏览器如何访问")]),t._v(" "),s("h3",{attrs:{id:"如何访问长连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何访问长连接"}},[t._v("#")]),t._v(" 如何访问长连接")]),t._v(" "),s("blockquote",[s("p",[t._v("根据短链查询到长链后，服务端http响应状态码为301，进行了重定向。\n举例：当我们访问链接 https://t.hk.uy/bdGE 的时候用google的http插件我们能看到")])]),t._v(" "),s("p",[s("img",{attrs:{src:e(416),alt:"301重定向"}})]),t._v(" "),s("h3",{attrs:{id:"_301与302区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_301与302区别"}},[t._v("#")]),t._v(" 301与302区别")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}}),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("301")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("302")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("永久重定向")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("临时重定向")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("301表示旧地址A的资源已经被永久地移除了（这个资源不可访问了）")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("302表示旧地址A的资源还在（仍然可以访问），这个重定向只是临时地从旧地址A跳转到地址B")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("搜索引擎")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("抓取新内容的同时也将旧的网址交换为重定向之后的网址")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("搜索引擎会抓取新的内容而保存旧的网址")])])])]),t._v(" "),s("h3",{attrs:{id:"_301和302共同点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_301和302共同点"}},[t._v("#")]),t._v(" 301和302共同点")]),t._v(" "),s("blockquote",[s("p",[t._v("就是说浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的URL地址，这个地址可以从响应的Location首部中获取（用户看到的效果就是他输入的地址A瞬间变成了另一个地址B）。")])]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"四-短链注释事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四-短链注释事项"}},[t._v("#")]),t._v(" 四.短链注释事项")]),t._v(" "),s("ol",[s("li",[t._v("短链生成验证，要有验证措施，比如点击转换后输入验证码啊等，不然会被人家把服务器打爆。")]),t._v(" "),s("li",[t._v("短链生成限制，限制IP的单日请求总数，超过阈值则直接拒绝服务。")]),t._v(" "),s("li",[t._v("短链生成缓存，缓存提高查询效率，如用redis缓存 长网址->短网址 的映射，仅存储一天以内的数据，用LRU机制进行淘汰。")])])])}),[],!1,null,null,null);a.default=_.exports}}]);