(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{631:function(t,e,a){t.exports=a.p+"assets/img/implicit001.0626b164.png"},632:function(t,e,a){t.exports=a.p+"assets/img/implicit002.ba10dd26.png"},633:function(t,e,a){t.exports=a.p+"assets/img/implicit003.f6382e4c.png"},634:function(t,e,a){t.exports=a.p+"assets/img/implicit004.8cf70b23.png"},664:function(t,e,a){"use strict";a.r(e);var s=a(10),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("写在前面：Oauth2系列配套视频地址 https://t.hk.uy/bdr8")])]),t._v(" "),s("h2",{attrs:{id:"一-概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一-概念"}},[t._v("#")]),t._v(" 一.概念")]),t._v(" "),s("p",[s("strong",[t._v('简化模式（implicit grant type）不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了"授权码"这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。')]),t._v(" "),s("br")]),t._v(" "),s("h2",{attrs:{id:"二-适用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-适用场景"}},[t._v("#")]),t._v(" 二.适用场景")]),t._v(" "),s("p",[s("strong",[t._v("1. 仅需临时访问的场景")])]),t._v(" "),s("p",[s("strong",[t._v("2. 用户会定期在API提供者那里进行登录")])]),t._v(" "),s("p",[s("strong",[t._v("3. OAuth客户端运行在浏览器中（Javascript、Flash等）")])]),t._v(" "),s("p",[s("strong",[t._v("浏览器绝对可信，因为该类型可能会将访问令牌泄露给恶意用户或应用程序。")])]),t._v(" "),s("p",[s("strong",[t._v("例如需要通过浏览器的javascript代码，或者电脑/移动终端上的客户端访问时。")]),t._v(" "),s("br")]),t._v(" "),s("h2",{attrs:{id:"三-流程示意图与时序图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-流程示意图与时序图"}},[t._v("#")]),t._v(" 三.流程示意图与时序图")]),t._v(" "),s("p",[s("strong",[t._v("授权验证流程示意图")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(631),alt:"clipboard.png"}})]),t._v(" "),s("p",[s("code"),s("strong",[t._v("A-A-B-B-C-D-E-F-G")])]),t._v(" "),s("p",[s("strong",[t._v("（A）客户端将用户导向认证服务器。")])]),t._v(" "),s("p",[s("strong",[t._v("（B）用户决定是否给于客户端授权。")])]),t._v(" "),s("p",[s("strong",[t._v('（C）假设用户给予授权，认证服务器将用户导向客户端指定的"重定向URI"，并在URI的Hash(#)部分包含了访问令牌。')])]),t._v(" "),s("p",[s("strong",[t._v("（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。")])]),t._v(" "),s("p",[s("strong",[t._v("（E）资源服务器返回一个脚本，可以获取Hash值中的令牌。")])]),t._v(" "),s("p",[s("strong",[t._v("（F）浏览器执行上一步获得的脚本，提取出令牌。")])]),t._v(" "),s("p",[s("strong",[t._v("（G）浏览器将令牌发给客户端。")])]),t._v(" "),s("p",[s("code"),s("strong",[t._v("备注：D、E、F 通过js脚本解析出token 因为它通常会保存在本地")])]),t._v(" "),s("p",[s("strong",[t._v("授权验证流程时序图")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(632),alt:"image.png"}}),t._v(" "),s("br")]),t._v(" "),s("h2",{attrs:{id:"四-流程与-参数详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四-流程与-参数详解"}},[t._v("#")]),t._v(" 四.流程与 参数详解")]),t._v(" "),s("p",[s("strong",[t._v("A步骤中，客户端发出的HTTP请求，包含以下参数(参数跟到url后面)：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("参数名称")])]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("描述")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("response_type")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v('表示授权类型，此处的值固定为"token"，必选项。')])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("client_id")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("必填。客户端标识。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("redirect_uri")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表示重定向的URI，可选项。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("scope")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("可选。请求可能会有一个或多个scope值。授权服务器会把客户端请求的范围(scope)展示给用户看。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("state")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("推荐。state参数用于应用存储特定的请求数据的可以防止CSRF攻击。授权服务器必须原封不动地将这个值返回给应用。")])])])]),t._v(" "),s("p",[s("strong",[t._v("C步骤中，认证服务器发送的HTTP回复，包含以下参数：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("参数名称")])]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("描述")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("access_token")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表示访问令牌，必选项。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("token_type")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("expires_in")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("state")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("scope")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("表示权限范围，如果与客户端申请的范围一致，此项可省略。")])])])]),t._v(" "),s("br"),t._v(" "),s("h2",{attrs:{id:"五-锚点-fragment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五-锚点-fragment"}},[t._v("#")]),t._v(" 五.锚点（fragment）")]),t._v(" "),s("p",[s("strong",[t._v("锚点用于html页面内跳转。")])]),t._v(" "),s("p",[s("strong",[t._v('令牌的位置是 URL 锚点（fragment），而不是查询字符串（querystring），这是因为 OAuth 2.0 允许跳转网址是 HTTP 协议，因此存在"中间人攻击"的风险，而浏览器跳转时，锚点不会发到服务器，就减少了泄漏令牌的风险。')])]),t._v(" "),s("p",[s("strong",[t._v("这种方式把令牌直接传给前端，是很不安全的。因此，只能用于一些安全要求不高的场景，并且令牌的有效期必须非常短，通常就是会话期间（session）有效，浏览器关掉，令牌就失效了。")]),t._v(" "),s("br")]),t._v(" "),s("h2",{attrs:{id:"六-实例演示解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六-实例演示解析"}},[t._v("#")]),t._v(" 六.实例演示解析")]),t._v(" "),s("p",[s("strong",[t._v("1. 获得token")])]),t._v(" "),s("p",[s("a",{attrs:{href:"http://localhost:8080/oauth/authorize?response_type=token&client_id=my-client-1&redirect_uri=http://www.baidu.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080/oauth/authorize?response_type=token&client_id=my-client-1&redirect_uri=http://www.baidu.com"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:a(633),alt:"image.png"}})]),t._v(" "),s("p",[s("strong",[t._v("2.拿着token访问资源")])]),t._v(" "),s("p",[s("a",{attrs:{href:"http://localhost:8080/oauth2/hi?access_token=71689e9e-e738-4e3d-87b9-943fc2d54478",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080/oauth2/hi?access_token=71689e9e-e738-4e3d-87b9-943fc2d54478"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:a(634),alt:"image.png"}})]),t._v(" "),s("p",[t._v("备注："),s("a",{attrs:{href:"http://wiki.open.qq.com/wiki/website/%E5%BC%80%E5%8F%91%E6%94%BB%E7%95%A5_Client-side",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://wiki.open.qq.com/wiki/website/开发攻略_Client-side"),s("OutboundLink")],1),t._v(" qq 简化模式开发攻略")])])}),[],!1,null,null,null);e.default=r.exports}}]);